<header id="header">
    <div class="header-container">
        <div class="header-menu">
            <div class="logo">
                <a href="/"><img src="{{ url_for('static', filename='images/Uga_logo.png') }}"></a>
            </div>

            <!-- 햄버거 메뉴 -->
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <!-- 메뉴 -->
            <ul class="menu">
                <!-- Product 메뉴 -->
                 <li class="dropdown">
                    <a href="javascript:void(0)" class="dropdown-toggle">회사소개</a>
                    <ul class="dropdown-menu" id="company-drop" style="flex-direction: row;">
                        <li><a href="#">함께하는 사람들</a></li>
                        <li><a href="#">우리 이야기</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="javascript:void(0)" class="dropdown-toggle">상품</a>
                    <ul class="dropdown-menu" id="product-drop">
                        <li class="category"><a href="javascript:void(0)">카테고리1</a>
                            <ul class="dropdown-sub-menu">
                                <li><a href="javascript:void(0)">항목1-1</a></li>
                                <li><a href="javascript:void(0)">항목1-2</a></li>
                            </ul>
                        </li>
                        <li class="category"><a href="javascript:void(0)">카테고리2</a>
                            <ul class="dropdown-sub-menu">
                                <li><a href="javascript:void(0)">항목2-1</a></li>
                                <li><a href="javascript:void(0)">항목2-2</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>


                <li><a href="#">우리에게</a></li>

            </ul>
            <div class="right-section">
                <!-- 로그인 상태 -->
                {% if session.get('user_name') %}
                <li class="user-dropdown">
                    <a href="javascript:void(0)" id="userMenuToggle">
                        {{ session['user_name'] }} ▼
                    </a>
                    <ul class="user-dropdown-menu" id="userDropdownMenu">
                        <div class="aff_name">
                            <p>소속 {% if session.get('user_aff') %}{{ session['user_aff'] }}{% endif %}</p>
                            <p>성명 {{ session['user_name'] }}{% if session.get('user_title') %} 님 | 직함 {{ session['user_title'] }}{% endif %}</p>
                        </div>
                        <li><a href="{{ url_for('my_page') }}">마이페이지</a></li>
                        <li><a href="{{ url_for('logout') }}">로그아웃</a></li>
                    </ul>
                </li>
                {% else %}
                <li><a class="login_btn" onclick="openLoginModal()">Login</a></li>
                {% endif %}

                <div class="header-cart">
                    <button id="cartBtn">
                        <span id="cart-icon">🛒</span>
                        <span id="cart-count" class="cart-bubble">0</span>
                    </button>
                    <div id="cartDropdown" class="cart-dropdown" style="display:none;">
                        <ul id="cart-items-list"></ul>
                        <div class="cart-total">총합: <span id="cart-total">0</span>원</div>
                        <button type="button" id="checkout-btn">구매하기</button>
                    </div>
                </div>
            </div>
            <div id="moreMenu" class="more-menu" onclick="openMoreMenu()">...</div>
        </div>
    </div>

    <!-- 로그인 팝업 -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLoginModal()">&times;</span>
            <h2>Login</h2>
            <form id="loginForm"> <!-- id 추가, action 제거 -->
                <input type="text" name="usermail" placeholder="이메일을 입력해주세요" required>
                <input type="password" name="password" placeholder="비밀번호를 입력해주세요" required>
                <button type="submit">Login</button>
                <p id="loginError" style="color: red; display: none; margin-top: 8px;"></p>
            </form>
            <p>
                <a href="/sign_up_terms" class="link-btn">회원가입</a> | 
                <a href="/reset_password" class="link-btn">비밀번호 찾기</a>
            </p>
        </div>
    </div>
</header>

<nav class="breadcrumb-container" aria-label="breadcrumb">
    <ul class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">홈</a></li>
        {% for crumb in breadcrumbs %}
            <span class="breadcrumb-sep">›</span>
            {% if crumb.url and not loop.last %}
                <li class="breadcrumb-item"><a href="{{ crumb.url }}">{{ crumb.title }}</a></li>
            {% else %}
                <li class="breadcrumb-item active" aria-current="page">{{ crumb.title }}</li>
            {% endif %}
        {% endfor %}
    </ul>
</nav>

<!-- 상품/카테고리/제품 영역 -->
<div class="product-panel">
    <div id="product-left">
        <!-- 카테고리, 서브카테고리 동적 로드 -->
    </div>
    <div id="product-right" style="display:none;">
        <!-- 선택된 서브카테고리 상품 리스트 -->
    </div>
</div>